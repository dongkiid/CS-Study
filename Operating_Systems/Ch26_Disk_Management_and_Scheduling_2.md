# Swap-Space Management

### 우리는 왜 보조기억장치의 디스크를 사용했을까?

결론은 메모리의 제약 때문이였다.

- 메모리의 휘발적(volatile) 특성으로 파일 시스템처럼 연속적으로 데이터를 유지해야하는 경우 비휘발성의 디스크를 사용해야했다.
- 프로그램 실행을 위한 메모리 공간 부족으로 Swap Space(Swap Area) 용도로 사용했다.

> 물리적 디스크에서 Swap-Space(Swap Area)는 운영체제에서 메모리 관리를 위해 사용되는 공간이다. Swap Area은 물리적 메모리(RAM)의 연장으로 사용되며, 메모리에 로드되지 않은 프로세스나 프로세스의 일부를 디스크에 저장하여 메모리 부족 상황에서 메모리를 확보하는 용도로 활용된다.
> 

### 하드디스크에서 Swap-Space는 어떻게 관리되었을까?

![image](https://github.com/IToriginal/CS-Study/assets/117193889/5f3c36b5-cd31-4a72-b26d-1f1b5a07bb0f)

Swap Area는 File System을 사용하여 디스크에 할당됩니다. 
일반적으로 파티셔닝된 물리적 디스크에서 Swap Area를 만들 수 있다. 

파티셔닝은 물리적 디스크를 논리적인 디스크로 나누는 과정으로, 각 파티션은 운영체제에게 독립된 디스크로 인식된다. 이렇게 생성된 파티션에 파일 시스템을 설치하여 사용하거나, 스왑 영역으로 사용할 수 있습니다.

File System은 기본적으로 `512` 바이트 섹터 단위로 데이터를 저장한다. 
데이터의 할당 방식은 연속 할당, 연결 할당, 인덱스 할당 등 다양한 방법이 있다. 
유닉스나 FAT 파일 시스템은 이러한 방법을 효율적으로 활용하여 공간 효율성을 높입니다.

Swap Area는 프로세스의 주소 공간이 더 이상 필요하지 않을 때 사라지는 임시적인 공간이다. 
Swap Area는 물리적 메모리의 연장으로 사용되므로, Swap Area에서 메모리로 다시 로드할 때와 디스크로 내보낼 때의 속도 효율성이 중요하다. 이를 위해서 보통 큰 단위로 데이터를 올리고 내리게 된다. 
예를 들어, Swap Area의 섹터 크기는 일반적으로 `512` KB로 설정되며, 섹터 크기의 1000배에 해당된다. 경우에 따라 16KB에서 512KB까지의 크기를 가질 수도 있다.

# RAID (Redundant Array of Independent Disks)

RAID는 여러 개의 독립적인 디스크를 하나로 묶어서 사용하는 기술이다.

주로, 비용이 저렴한 디스크를 사용해서 구성하고 여러 디스크에 중복된 데이터를 저장하거나 분산하여 데이터를 저장함으로써 `성능 향상`과 `신뢰성`을 동시에 갖출 수 있다.

## RAID의 주요 목적

### 1. 디스크 처리 속도 향상

RAID는 데이터를 여러 디스크에 분산하여 저장함으로서 디스크 I/O 작업을 병렬로 처리할 수 있다.

이를 통해서 읽기, 쓰기 작업의 처리 속도를 향상시킬수 있다.

데이터를 분산 저장하는 방법에는 여러가지 방법이 있는데, 대표적으로 인터리빙(interleaving) 또는 스트라이핑(striping)이 있다.

### 2. 신뢰성 향상

RAID는 데이터의 신뢰성을 향상시키기위해 중복 저장 또는 미러링 방식을 사용한다.

중복저장은 동일한 정보를 여러 디스크에 중복하여 저장하는 방식으로, 하나의 디스크가 고장 나더라도 다른 디스크에서 데이터를 읽어 올 수 있다. 이를 통해서 시스템의 가용성을 높일 수 있다.

미러링 방식은 단순한 중복 저장 방식인데, 모든 데이터를 여러 디스크에 동일하게 저장하는 방법이다. 디스크의 고장에 대비해서 두 새 이상의 디스크에 동일한 데이터를 저장해 데이터의 손실을 방지할 수 있는 것이다.

RAID에서는 단순한 중복 저장 방식뿐만 아니라 parity(패리티)를 사용해 공간의 효율성을 높일 수 있다.

패리티는 중복 저장의 정도를 낮춰 오류가 발생한 경우에 오류를 검출하고 복구할 수 있는 방식이다.

예를 들어, 4개의 디스크 중에 3개의 디스크에 데이터를 저장하고 나머지 디스크에는 해쉬함수를 사용하여 계산된 패리티를 저장해게 된다. 그렇게되면 디스크 중 하나가 손상되었을 때 손상된 디스크의 데이터를 복구 할 수 있게 된다.

RAID는 다양한 수준(Level)으로 분류되는데 각 수준은 특정한 데이터 보호 방식과 성능 특성을 가지고 있다.

예를 들면, RAID 0 는 스트라이핑만 사용해 성능을 향상 시키는 반면에 RAID 1은 미러링을 사용해 데이터의 신뢰성을 중시하게 된다. RAID 5와 RAID 6은 패리티를 사용하여 공간의 효율성을 높이면서도 데이터 보호 기능을 제공하게 된다.

> 즉, `RAID` 는 중복, 분산하여 저장하는 것!